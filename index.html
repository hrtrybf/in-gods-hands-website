<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Measure Lawn & Calculate Cost</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 650px;
      margin: 20px auto;
      text-align: center;
    }
    .step {
      margin-bottom: 30px;
    }
    iframe {
      width: 100%;
      height: 500px; /* Adjust as needed */
      border: 1px solid #ddd;
    }
    input, button, select {
      padding: 8px;
      margin: 10px;
      width: 250px;
      max-width: 90%;
    }
    #result {
      font-weight: bold;
      margin-top: 20px;
    }
  </style>
</head>
<body>

<h1>Lawn Care Estimate</h1>

<!-- Step 1: Embed the measuring tool -->
<div class="step">
  <h2>Step 1: Measure Your Lawn</h2>
  <p>
    Use the tool below to outline your property and find your total lawn square footage.
  </p>
  <iframe src="https://www.measuremylawn.com" title="MeasureMyLawn"></iframe>
  <p>
    Once you get the square footage, please enter it in the next step.
  </p>
</div>

<!-- Step 2: Enter sq ft and calculate cost -->
<div class="step">
  <h2>Step 2: Enter Lawn Square Footage</h2>
  <input type="number" id="lawnSqFt" placeholder="e.g. 3000">
  
  <h3>Select a Service:</h3>
  <select id="services" onchange="toggleExtraInputs()">
    <option value="">-- Choose One --</option>
    <option value="mowing">Lawn Mowing & Maintenance (Starting at $20)</option>
    <option value="trimming">Tree Trimming & Removal</option>
    <option value="shrubs">Bush & Shrub Trimming (Starting at $20)</option>
    <option value="mulching">Mulching ($70 per cubic yard)</option>
    <option value="weeding">Weeding & Flower Bed Maintenance ($50 per bed)</option>
    <option value="gravel">Gravel Installation & Driveway Work</option>
    <option value="gutter">Gutter Cleaning & Roof Debris Removal</option>
    <option value="aeration">Seasonal Aeration Services</option>
  </select>
  
  <div id="extraInputs"></div>

  <br>
  <button onclick="calculateEstimate()">Calculate Cost</button>
</div>

<p id="result"></p>

<script>
/**
 * Toggle additional input fields depending on the selected service
 */
function toggleExtraInputs() {
  const svc = document.getElementById("services").value;
  const container = document.getElementById("extraInputs");
  container.innerHTML = "";

  if (svc === "trimming") {
    // # of trees
    container.innerHTML = `
      <label># of Trees:</label><br>
      <input type="number" id="numTrees" min="1" value="1">
    `;
  } else if (svc === "shrubs") {
    // # of shrubs
    container.innerHTML = `
      <label># of Shrubs:</label><br>
      <input type="number" id="numShrubs" min="1" value="1">
    `;
  } else if (svc === "mulching") {
    // Depth in inches
    container.innerHTML = `
      <label>Mulch Depth (in):</label><br>
      <input type="number" id="mulchDepth" min="1" value="2">
    `;
  } else if (svc === "weeding") {
    // # of beds
    container.innerHTML = `
      <label># of Beds:</label><br>
      <input type="number" id="numBeds" min="1" value="1">
    `;
  } else if (svc === "gravel") {
    // Driveway area
    container.innerHTML = `
      <label>Driveway Area (sq ft):</label><br>
      <input type="number" id="drivewayArea" min="1" value="500">
    `;
  } else if (svc === "gutter") {
    // Gutter length
    container.innerHTML = `
      <label>Gutter Length (ft):</label><br>
      <input type="number" id="gutterLength" min="1" value="120">
    `;
  }
  // Mowing & aeration only need the lawn sq ft
}

/**
 * Apply your cost formulas
 */
function calculateEstimate() {
  const sqFtInput = document.getElementById("lawnSqFt");
  const svc = document.getElementById("services").value;
  const resultEl = document.getElementById("result");

  resultEl.innerText = "";

  // 1) Validate user inputs
  const lawnSqFt = parseFloat(sqFtInput.value || "0");
  if (!lawnSqFt || lawnSqFt <= 0) {
    resultEl.innerText = "Please enter a valid lawn size.";
    return;
  }
  if (!svc) {
    resultEl.innerText = "Please select a service.";
    return;
  }

  let price = 0;

  // 2) Switch by service
  switch (svc) {
    case "mowing":
      // Price_mowing = max(20, 0.02 * A)
      price = Math.max(20, 0.02 * lawnSqFt);
      break;

    case "trimming":
      // Price_trimming = #Trees * 200
      const trees = parseInt(document.getElementById("numTrees").value || "1", 10);
      price = trees * 200;
      break;

    case "shrubs":
      // Price_shrubs = max(20, S*20)
      const shrubs = parseInt(document.getElementById("numShrubs").value || "1", 10);
      price = Math.max(20, shrubs * 20);
      break;

    case "mulching":
      // Price_mulching = (A*(D/12))/27 * 70
      const depth = parseFloat(document.getElementById("mulchDepth").value || "2");
      const cubicFeet = lawnSqFt * (depth / 12);
      const cubicYards = cubicFeet / 27;
      price = cubicYards * 70;
      break;

    case "weeding":
      // Price_weeding = B * 50
      const beds = parseInt(document.getElementById("numBeds").value || "1", 10);
      price = beds * 50;
      break;

    case "gravel":
      // Price_gravel = max(150, 0.15 * drivewayArea)
      const drivewayArea = parseFloat(document.getElementById("drivewayArea").value || "500");
      price = Math.max(150, drivewayArea * 0.15);
      break;

    case "gutter":
      // Price_gutter = max(50, L)
      const gutterLength = parseFloat(document.getElementById("gutterLength").value || "120");
      price = Math.max(50, gutterLength);
      break;

    case "aeration":
      // Price_aeration = max(100, 0.03 * A)
      price = Math.max(100, 0.03 * lawnSqFt);
      break;
  }

  resultEl.innerText = `Estimated Cost: $${price.toFixed(2)}`;
}
</script>

</body>
</html>
